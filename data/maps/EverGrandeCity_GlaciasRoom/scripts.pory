mapscripts EverGrandeCity_GlaciasRoom_MapScripts {
	MAP_SCRIPT_ON_FRAME_TABLE[
		VAR_ELITE_4_STATE, 0 : EverGrandeCity_GlaciasRoom_EventScript_WalkInCloseDoor
	]
	MAP_SCRIPT_ON_LOAD : EverGrandeCity_GlaciasRoom_OnLoad
    MAP_SCRIPT_ON_WARP_INTO_MAP_TABLE[
        VAR_TEMP_1, 0 : PokemonLeague_EliteFour_EventScript_PlayerTurnNorth
    ]
}

script EverGrandeCity_GlaciasRoom_EventScript_WalkInCloseDoor {
	lockall
	call(PokemonLeague_EliteFour_EventScript_WalkInCloseDoor)
	setvar(VAR_ELITE_4_STATE, 1)
	releaseall
	end
}

script EverGrandeCity_GlaciasRoom_OnLoad {
	call_if_set(FLAG_DEFEATED_ELITE_4_GLACIA, PokemonLeague_EliteFour_EventScript_ResetAdvanceToNextRoom)
	call_if_eq(VAR_ELITE_4_STATE, 1, PokemonLeague_EliteFour_EventScript_CloseDoor)
	end
}

script EverGrandeCity_GlaciasRoom_EventScript_Glacia {
	lock
	faceplayer
	goto_if_set(FLAG_DEFEATED_ELITE_4_GLACIA, EverGrandeCity_GlaciasRoom_EventScript_PostBattleSpeech)
	playbgm(MUS_ENCOUNTER_ELITE_FOUR, FALSE)
	setflag(FLAG_USE_NEXT_LEVEL_CAP)
	msgbox(EverGrandeCity_GlaciasRoom_Text_IntroSpeech, MSGBOX_DEFAULT)
	trainerbattle_no_intro(TRAINER_GLACIA_1, EverGrandeCity_GlaciasRoom_Text_Defeat)
	
	clearflag(FLAG_USE_NEXT_LEVEL_CAP)
	setflag(FLAG_DEFEATED_ELITE_4_GLACIA)
	call(PokemonLeague_EliteFour_SetAdvanceToNextRoomMetatiles)
	EverGrandeCity_GlaciasRoom_EventScript_PostBattleSpeech:
	msgbox(EverGrandeCity_GlaciasRoom_Text_PostBattleSpeech, MSGBOX_DEFAULT)
	release
	end
}

text EverGrandeCity_GlaciasRoom_Text_IntroSpeech {
	"Welcome, my name is Glacia\n"
	"of the Elite Four.\p"
	"I've traveled from afar to Hoenn\n"
	"so that I may hone my icy skills.\p"
	"But all I have seen are challenges by\n"
	"weak Trainers and their Pokémon.\p"
	"What about you?\p"
	"It would please me to no end if I could\n"
	"go all out against you!"
}

text EverGrandeCity_GlaciasRoom_Text_Defeat {
	"You and your Pokémon…\n"
	"How hot your spirits burn!\p"
	"The all-consuming heat overwhelms.\p"
	"It's no surprise that my icy skills\n"
	"failed to harm you."
}

text EverGrandeCity_GlaciasRoom_Text_PostBattleSpeech {
	"Advance to the next room.\p"
	"And there, bring all your strength\n"
	"if you hope to emerge victorious."
}
