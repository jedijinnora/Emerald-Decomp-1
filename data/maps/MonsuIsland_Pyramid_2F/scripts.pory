mapscripts MonsuIsland_Pyramid_2F_MapScripts {
    MAP_SCRIPT_ON_TRANSITION : MonsuIsland_Pyramid_2F_OnTransition
    MAP_SCRIPT_ON_RESUME : MonsuIsland_Pyramid_2F_OnResume
}

script MonsuIsland_Pyramid_2F_OnTransition {
    call_if_set(FLAG_DEFEATED_WALKING_WAKE, MonsuIsland_Pyramid_2F_EventScript_HideWalkingWake)
    call_if_set(FLAG_CAUGHT_WALKING_WAKE, MonsuIsland_Pyramid_2F_EventScript_HideWalkingWake)
    call_if_set(FLAG_DEFEATED_RAGING_BOLT, MonsuIsland_Pyramid_2F_EventScript_HideRagingBolt)
    call_if_set(FLAG_CAUGHT_RAGING_BOLT, MonsuIsland_Pyramid_2F_EventScript_HideRagingBolt)
    call_if_set(FLAG_DEFEATED_GOUGING_FIRE, MonsuIsland_Pyramid_2F_EventScript_HideGougingFire)
    call_if_set(FLAG_CAUGHT_GOUGING_FIRE, MonsuIsland_Pyramid_2F_EventScript_HideGougingFire)
    call_if_unset(FLAG_SYS_GAME_CLEAR, MonsuIsland_Pyramid_2F_EventScript_HideWalkingWake)
    call_if_unset(FLAG_SYS_GAME_CLEAR, MonsuIsland_Pyramid_2F_EventScript_HideRagingBolt)
    call_if_unset(FLAG_SYS_GAME_CLEAR, MonsuIsland_Pyramid_2F_EventScript_HideGougingFire)
    end
}

script MonsuIsland_Pyramid_2F_OnResume {
    call_if_set(FLAG_SYS_CTRL_OBJ_DELETE, Common_EventScript_TryRemoveCaughtEncounter)
    end
}

script MonsuIsland_Pyramid_2F_EventScript_HideWalkingWake {
    setflag(FLAG_TEMP_11)
    end
}

script MonsuIsland_Pyramid_2F_EventScript_HideRagingBolt {
    setflag(FLAG_TEMP_12)
    end
}

script MonsuIsland_Pyramid_2F_EventScript_HideGougingFire {
    setflag(FLAG_TEMP_13)
    end
}

script MonsuIsland_Pyramid_2F_EventScript_WalkingWake {
    lock
    faceplayer
    waitse
    playmoncry(SPECIES_WALKING_WAKE, CRY_MODE_ENCOUNTER)
	delay(40)
	waitmoncry
    setflag(FLAG_SMART_WILD_AI)
	createmon(1, 0, SPECIES_WALKING_WAKE, 90, ITEM_WHITE_HERB, move1=MOVE_HYDRO_STEAM, move2=MOVE_DRAGON_PULSE, move3=MOVE_FLAMETHROWER, move4=MOVE_SUNNY_DAY)
	setflag(FLAG_SYS_CTRL_OBJ_DELETE)
	special(BattleSetup_StartLegendaryBattle)
	waitstate
    clearflag(FLAG_SMART_WILD_AI)
    clearflag(FLAG_SYS_CTRL_OBJ_DELETE)
	specialvar(VAR_RESULT, GetBattleOutcome)
	goto_if_eq(VAR_RESULT, B_OUTCOME_WON, MonsuIsland_Pyramid_2F_EventScript_DefeatedWalkingWake)
	goto_if_eq(VAR_RESULT, B_OUTCOME_RAN, MonsuIsland_Pyramid_2F_EventScript_RanFromWalkingWake)
	goto_if_eq(VAR_RESULT, B_OUTCOME_PLAYER_TELEPORTED, MonsuIsland_Pyramid_2F_EventScript_RanFromWalkingWake)
	setflag(FLAG_CAUGHT_WALKING_WAKE)
    release
    end
}

script MonsuIsland_Pyramid_2F_EventScript_DefeatedWalkingWake {
	setflag(FLAG_DEFEATED_WALKING_WAKE)
	goto(Common_EventScript_RemoveStaticPokemon)
	end
}

script MonsuIsland_Pyramid_2F_EventScript_RanFromWalkingWake {
	setflag(FLAG_DEFEATED_WALKING_WAKE)
	setvar(VAR_0x8004, SPECIES_WALKING_WAKE)
	goto(Common_EventScript_LegendaryFlewAway)
	end
}

script MonsuIsland_Pyramid_2F_EventScript_RagingBolt {
    lock
    faceplayer
    waitse
    playmoncry(SPECIES_RAGING_BOLT, CRY_MODE_ENCOUNTER)
	delay(40)
	waitmoncry
    setflag(FLAG_SMART_WILD_AI)
	createmon(1, 0, SPECIES_RAGING_BOLT, 90, ITEM_WHITE_HERB, move1=MOVE_THUNDERCLAP, move2=MOVE_DRAGON_PULSE, move3=MOVE_THUNDERBOLT, move4=MOVE_CALM_MIND)
	setflag(FLAG_SYS_CTRL_OBJ_DELETE)
	special(BattleSetup_StartLegendaryBattle)
	waitstate
    clearflag(FLAG_SMART_WILD_AI)
    clearflag(FLAG_SYS_CTRL_OBJ_DELETE)
	specialvar(VAR_RESULT, GetBattleOutcome)
	goto_if_eq(VAR_RESULT, B_OUTCOME_WON, MonsuIsland_Pyramid_2F_EventScript_DefeatedRagingBolt)
	goto_if_eq(VAR_RESULT, B_OUTCOME_RAN, MonsuIsland_Pyramid_2F_EventScript_RanFromRagingBolt)
	goto_if_eq(VAR_RESULT, B_OUTCOME_PLAYER_TELEPORTED, MonsuIsland_Pyramid_2F_EventScript_RanFromRagingBolt)
	setflag(FLAG_CAUGHT_RAGING_BOLT)
    release
    end
}

script MonsuIsland_Pyramid_2F_EventScript_DefeatedRagingBolt {
	setflag(FLAG_DEFEATED_RAGING_BOLT)
	goto(Common_EventScript_RemoveStaticPokemon)
	end
}

script MonsuIsland_Pyramid_2F_EventScript_RanFromRagingBolt {
	setflag(FLAG_DEFEATED_RAGING_BOLT)
	setvar(VAR_0x8004, SPECIES_RAGING_BOLT)
	goto(Common_EventScript_LegendaryFlewAway)
	end
}

script MonsuIsland_Pyramid_2F_EventScript_GougingFire {
    lock
    faceplayer
    waitse
    playmoncry(SPECIES_GOUGING_FIRE, CRY_MODE_ENCOUNTER)
	delay(40)
	waitmoncry
    setflag(FLAG_SMART_WILD_AI)
	createmon(1, 0, SPECIES_GOUGING_FIRE, 90, ITEM_WHITE_HERB, move1=MOVE_BURNING_BULWARK, move2=MOVE_OUTRAGE, move3=MOVE_FLARE_BLITZ, move4=MOVE_DRAGON_DANCE)
	setflag(FLAG_SYS_CTRL_OBJ_DELETE)
	special(BattleSetup_StartLegendaryBattle)
	waitstate
    clearflag(FLAG_SMART_WILD_AI)
    clearflag(FLAG_SYS_CTRL_OBJ_DELETE)
	specialvar(VAR_RESULT, GetBattleOutcome)
	goto_if_eq(VAR_RESULT, B_OUTCOME_WON, MonsuIsland_Pyramid_2F_EventScript_DefeatedGougingFire)
	goto_if_eq(VAR_RESULT, B_OUTCOME_RAN, MonsuIsland_Pyramid_2F_EventScript_RanFromGougingFire)
	goto_if_eq(VAR_RESULT, B_OUTCOME_PLAYER_TELEPORTED, MonsuIsland_Pyramid_2F_EventScript_RanFromGougingFire)
	setflag(FLAG_CAUGHT_GOUGING_FIRE)
    release
    end
}

script MonsuIsland_Pyramid_2F_EventScript_DefeatedGougingFire {
	setflag(FLAG_DEFEATED_GOUGING_FIRE)
	goto(Common_EventScript_RemoveStaticPokemon)
	end
}

script MonsuIsland_Pyramid_2F_EventScript_RanFromGougingFire {
	setflag(FLAG_DEFEATED_GOUGING_FIRE)
	setvar(VAR_0x8004, SPECIES_GOUGING_FIRE)
	goto(Common_EventScript_LegendaryFlewAway)
	end
}