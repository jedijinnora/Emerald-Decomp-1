mapscripts AbandonedShip_Rooms_1F_MapScripts {

}

script AbandonedShip_Rooms_1F_EventScript_Demetrius {
	trainerbattle_single(TRAINER_DEMETRIUS, AbandonedShip_Rooms_1F_Text_DemetriusIntro, AbandonedShip_Rooms_1F_Text_DemetriusDefeat)
	msgbox(AbandonedShip_Rooms_1F_Text_DemetriusPostBattle, MSGBOX_AUTOCLOSE)
	call(AbandonedShip_Rooms_1F_EventScript_TryDemetriusRematch)
	release
	end
}
script AbandonedShip_Rooms_1F_EventScript_TryDemetriusRematch {
	lock
    call(Common_EventScript_ShouldDoRematch)
	goto_if_eq(VAR_RESULT, FALSE, Common_EventScript_NopReturn)
	setvar(VAR_0x8003, TRAINER_DEMETRIUS)
	setvar(VAR_0x8004, 1)
	if (defeated(TRAINER_THALIA)) {
		msgbox(format("Include Thalia and make it a double battle?"), MSGBOX_YESNO)
		if (var(VAR_RESULT) == YES) {
			trainerbattle(TRAINER_BATTLE_SET_TRAINER_B, TRAINER_THALIA, 0, NULL, AbandonedShip_Rooms_1F_Text_ThaliaDefeat)
			addvar(VAR_0x8004, 1)
		}
	}
	call(Common_EventScript_CheckRecentRematchesSetBP)
	trainerbattle_no_intro(TRAINER_DEMETRIUS, AbandonedShip_Rooms_1F_Text_DemetriusDefeat)
	special(UpdateRecentTrainers)
	return
}

script AbandonedShip_Rooms_1F_EventScript_Thalia {
	trainerbattle_single(TRAINER_THALIA, AbandonedShip_Rooms_1F_Text_ThaliaIntro, AbandonedShip_Rooms_1F_Text_ThaliaDefeat)
	msgbox(AbandonedShip_Rooms_1F_Text_ThaliaPostBattle, MSGBOX_DEFAULT)
	call(AbandonedShip_Rooms_1F_EventScript_TryThaliaRematch)
	release
	end
}
script AbandonedShip_Rooms_1F_EventScript_TryThaliaRematch {
	lock
    call(Common_EventScript_ShouldDoRematch)
	goto_if_eq(VAR_RESULT, FALSE, Common_EventScript_NopReturn)
	setvar(VAR_0x8003, TRAINER_THALIA)
	setvar(VAR_0x8004, 1)
	if (defeated(TRAINER_DEMETRIUS)) {
		msgbox(format("Include Demetrius and make it a double battle?"), MSGBOX_YESNO)
		if (var(VAR_RESULT) == YES) {
			trainerbattle(TRAINER_BATTLE_SET_TRAINER_B, TRAINER_DEMETRIUS, 0, NULL, AbandonedShip_Rooms_1F_Text_DemetriusDefeat)
			addvar(VAR_0x8004, 1)
		}
	}
	call(Common_EventScript_CheckRecentRematchesSetBP)
	trainerbattle_no_intro(TRAINER_THALIA, AbandonedShip_Rooms_1F_Text_ThaliaDefeat)
	special(UpdateRecentTrainers)
	return
}

raw `
AbandonedShip_Rooms_1F_EventScript_Gentleman::
	msgbox AbandonedShip_Rooms_1F_Text_TakingALookAround, MSGBOX_NPC
	end

AbandonedShip_Rooms_1F_Text_TakingALookAround:
	.string "Ships of this sort are rare, so I'm\n"
	.string "taking a look around.\p"
	.string "Hmhm…\n"
	.string "There appear to be other cabins…$"

AbandonedShip_Rooms_1F_Text_ThaliaIntro:
	.string "What on earth would compel you to\n"
	.string "come here? You must be curious!$"

AbandonedShip_Rooms_1F_Text_ThaliaDefeat:
	.string "Not just curious, but also strong…$"

AbandonedShip_Rooms_1F_Text_ThaliaPostBattle:
	.string "What on earth would compel you to\n"
	.string "come back? You must really be curious!$"

AbandonedShip_Rooms_1F_Text_DemetriusIntro:
	.string "Waaah!\n"
	.string "I've been found! …Huh?$"

AbandonedShip_Rooms_1F_Text_DemetriusDefeat:
	.string "Oh, you're not my mom.$"

AbandonedShip_Rooms_1F_Text_DemetriusPostBattle:
	.string "I'm in trouble with my mom, so I ran.\n"
	.string "Keep it a secret where I am!$"

`
